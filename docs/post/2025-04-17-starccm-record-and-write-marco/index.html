<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <title>STAR-CCM&#43; macro file recording and writing :: Andrew Moa Blog Site - Example site for hugo-theme-tailwind</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="STAR-CCM&#43; macro is essentially a java file, and the syntax is no different from ordinary java. Using macros can help us simplify the processing process, especially some repetitive process operations. Completing some process operations by writing macro files can greatly liberate human resources, and even complete certain operations during the solution process.
1. Record macros The essence of STAR-CCM&#43; macro is a collection of various operation commands in the analysis process. Instead of explaining the complex and cumbersome java syntax &#43; API from scratch, it is better to start with engineering issues directly.
"
/>
<meta
  name="keywords"
  content="hugo, tailwind, tailwindcss, hugo theme, hugo theme tailwind"
/>
<meta name="robots" content="noodp" /><link rel="manifest" href="/manifest.json" /><meta property="og:url" content="https://andrewmoa.site/post/2025-04-17-starccm-record-and-write-marco/">
  <meta property="og:site_name" content="Andrew Moa Blog Site">
  <meta property="og:title" content="STAR-CCM&#43; macro file recording and writing">
  <meta property="og:description" content="STAR-CCM&#43; macro is essentially a java file, and the syntax is no different from ordinary java. Using macros can help us simplify the processing process, especially some repetitive process operations. Completing some process operations by writing macro files can greatly liberate human resources, and even complete certain operations during the solution process.
1. Record macros The essence of STAR-CCM&#43; macro is a collection of various operation commands in the analysis process. Instead of explaining the complex and cumbersome java syntax &#43; API from scratch, it is better to start with engineering issues directly.">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-04-17T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-04-21T17:30:33+08:00">
    <meta property="article:tag" content="Java">
    <meta property="article:tag" content="Star-Ccm&#43;">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="STAR-CCM&#43; macro file recording and writing">
  <meta name="twitter:description" content="STAR-CCM&#43; macro is essentially a java file, and the syntax is no different from ordinary java. Using macros can help us simplify the processing process, especially some repetitive process operations. Completing some process operations by writing macro files can greatly liberate human resources, and even complete certain operations during the solution process.
1. Record macros The essence of STAR-CCM&#43; macro is a collection of various operation commands in the analysis process. Instead of explaining the complex and cumbersome java syntax &#43; API from scratch, it is better to start with engineering issues directly.">


<link rel="canonical" href="https://andrewmoa.site/post/2025-04-17-starccm-record-and-write-marco/" />

<link rel="shortcut icon" href="/favicon.ico" />
<link rel="stylesheet" href="/css/index.min.8f52268ce38691bd84eeee05121a11e2bc53c0e9f7fa97e2b147af29c8a627e1.css">





      <script async src="https://www.googletagmanager.com/gtag/js?id=G-75W5D7R0V1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-75W5D7R0V1');
        }
      </script>




  
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"Andrew Moa"},"dateModified":"2025-04-21T17:30:33+08:00","datePublished":"2025-04-17T00:00:00Z","description":"STAR-CCM+ macro is essentially a java file, and the syntax is no different from ordinary java. Using macros can help us simplify the processing process, especially some repetitive process operations. Completing some process operations by writing macro files can greatly liberate human resources, and even complete certain operations during the solution process.\n1. Record macros The essence of STAR-CCM+ macro is a collection of various operation commands in the analysis process. Instead of explaining the complex and cumbersome java syntax + API from scratch, it is better to start with engineering issues directly.\n","image":"/images/starccm-bg.png","name":"STAR-CCM+ macro file recording and writing","url":"https://andrewmoa.site/post/2025-04-17-starccm-record-and-write-marco/"}
</script>

</head>
<body class="flex flex-col min-h-screen w-full bg-slate-50 dark:bg-gray-800"><header class="flex flex-none justify-center z-10">
    <div class="flex flex-row gap justify-between w-full max-w-4xl lg:max-w-5xl h-12 mt-3">
  <div class="flex-none ml-2 md:ml-0">
    <a href="/" class="">
      <img class="h-12 w-12 rounded-full object-cover bg-gray-100" src="/logo.svg" alt="logo">
    </a>
  </div>
  
  <h1 class="hidden md:flex flex-col justify-center mx-2">
    <a href="/" class="text-2xl font-semibold text-slate-800 dark:text-slate-200">
      Andrew Moa Blog Site
    </a>
  </h1>
  
  <div class="flex-1"></div>
  <div class="flex-none">
    



<nav class="h-full static">
  <button id="navbar-menu-toggle" type="button" class="inline-flex items-center p-2 text-sm text-slate-800 dark:text-slate-200 rounded-lg md:hidden" aria-controls="navbar-menu" aria-expanded="false">
    <span class="sr-only">Open main menu</span>
    <i class="w-8 h-8">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 6l16 0" />
  <path d="M4 12l16 0" />
  <path d="M4 18l16 0" />
</svg>

    </i>
  </button>
  <div class="absolute md:static top-16 left-0 right-0 z-50 hidden w-full md:block md:w-auto" id="navbar-menu">
    <ul class="flex flex-col mx-2 md:mx-0 md:flex-row md:border-0 rounded-xs md:rounded-full px-3 text-base font-medium text-slate-800 dark:text-slate-200 shadow-lg bg-white dark:bg-gray-600 shadow-slate-800/5 dark:shadow-slate-200/5 ring-1 ring-slate-900/5 dark:ring-slate-100/5">
    
        <li id="post" class="">
          <a class="block px-3 py-3 hover:text-emerald-600 text-emerald-600"
            href="/post/" title="Post">Post</a>
        </li>
      
    
        <li id="about" class="">
          <a class="block px-3 py-3 hover:text-emerald-600"
            href="/about/" title="About">About</a>
        </li>
      
    
    </ul>
  </div>
</nav>


  </div>
  
  <div class="flex-none">
    <div class="h-full static">
      <button id="navbar-lang-toggle" type="button" class="inline-flex items-center p-2 text-sm text-slate-800 dark:text-slate-200 rounded-lg" aria-controls="navbar-menu" aria-expanded="false">
        <span class="sr-only">Open language switcher</span>
        <i class="w-8 h-8">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c0 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>

        </i>
      </button>
      <div class="absolute hidden top-16 z-50" id="navbar-lang">
        <ul class="flex flex-col rounded-xs px-3 text-base font-medium text-slate-800 dark:text-slate-200 shadow-lg bg-white dark:bg-gray-600 shadow-slate-800/5 dark:shadow-slate-200/5 ring-1 ring-slate-900/5 dark:ring-slate-100/5">
          <li class="">
            <span class="block px-3 py-3 cursor-default hover:text-emerald-600">English</span>
            </li>
        
          <li class="">
            <a class="block px-3 py-3 hover:text-emerald-600"
              href="/zh-cn/post/2025-04-17-starccm-record-and-write-marco/" title="中文">中文</a></li>
        
        </ul>
      </div>
    </div>
  </div>
  
  <div class="flex-none md:hidden">
    <a href=/search/ class="inline-flex items-center p-2 text-sm text-slate-800 dark:text-slate-200 rounded-lg" aria-controls="navbar-menu" aria-expanded="false">
      <span class="sr-only">Search</span>
      <i class="w-8 h-8">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
    <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
    <path d="M21 21l-6 -6" />
</svg>

      </i>
    </a>
  </div>
  <div class="darkmode-toggle flex flex-none mr-2 md:mr-0">
    <label for="darkmode-toggle" class="relative flex items-center gap-1 px-3 cursor-pointer rounded-full bg-gray-100 dark:bg-gray-600" title="Toggle dark mode">
      <input name="darkmode-toggle" id="darkmode-toggle" type="checkbox" class="sr-only peer" aria-label="Toggle dark mode">
      <div class="absolute z-10 w-15 h-8 rounded-full bg-white dark:bg-gray-700"></div>
      <i class="h-6 w-6 z-20 ml-1 flex-none rounded-full bg-yellow-400 place-self-center peer-checked:invisible">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brightness-down" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
   <path d="M12 5l0 .01"></path>
   <path d="M17 7l0 .01"></path>
   <path d="M19 12l0 .01"></path>
   <path d="M17 17l0 .01"></path>
   <path d="M12 19l0 .01"></path>
   <path d="M7 17l0 .01"></path>
   <path d="M5 12l0 .01"></path>
   <path d="M7 7l0 .01"></path>
</svg>

      </i>
      <i class="h-6 w-6 z-20 mr-1 flex-none rounded-full place-self-center invisible peer-checked:visible">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon-stars" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
   <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
   <path d="M19 11h2m-1 -1v2"></path>
</svg>

      </i>
    </label>
  </div>
</div>

  </header>
  <main class="flex flex-auto justify-center">
    
<div id="progress" class="fixed top-0 left-0 w-full h-1 bg-blue-500"></div>
<div class="w-full max-w-4xl lg:max-w-5xl">
  <div class="flex flex-col mt-6 mx-2 md:mx-0 rounded-lg overflow-hidden shadow-md bg-white dark:bg-gray-700">
    <div>
      <a href="/post/2025-04-17-starccm-record-and-write-marco/">
        <figure>
    <img class="w-full object-cover h-36 md:h-48 xl:h-60" src="/images/starccm-bg.png"
      alt="STAR-CCM&#43; macro file recording and writing" title="STAR-CCM&#43; macro file recording and writing"
      loading="lazy"
    >
  </figure>
      </a>
    </div>
    <div class="flex flex-col gap-y-3 p-6">
      <h1 class="text-4xl font-semibold text-slate-800 dark:text-slate-100">
        <a href="/post/2025-04-17-starccm-record-and-write-marco/">STAR-CCM+ macro file recording and writing</a>
      </h1>

      
      
  <ul class="flex flex-row flex-wrap text-slate-500 dark:text-slate-300">
    
      
      <li>
        <a href="/categories/cfd/"
          class="text-sm mr-2 px-2 py-1 rounded-sm border border-emerald-800 bg-emerald-800 text-slate-50">
          Cfd
        </a>
      </li>
      
    
    
      
      <li>
        <a href="/tags/java/"
          class="flex flex-row text-sm mr-2 py-1">
          <i class="h-5 w-5 flex-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M5 9l14 0"></path>
   <path d="M5 15l14 0"></path>
   <path d="M11 4l-4 16"></path>
   <path d="M17 4l-4 16"></path>
</svg>

          </i>
          <span class="ml-0">Java</span>
        </a>
      </li>
      
      <li>
        <a href="/tags/star-ccm&#43;/"
          class="flex flex-row text-sm mr-2 py-1">
          <i class="h-5 w-5 flex-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M5 9l14 0"></path>
   <path d="M5 15l14 0"></path>
   <path d="M11 4l-4 16"></path>
   <path d="M17 4l-4 16"></path>
</svg>

          </i>
          <span class="ml-0">Star-Ccm&#43;</span>
        </a>
      </li>
      
    
  </ul>



      <div class="flex flex-col gap-y-1 md:flex-row md:gap-y-0 md:gap-x-4 text-slate-500 dark:text-slate-300">
  
  
  <div class="flex flex-row text-base gap-x-1">
    <i class="h-6 w-6 flex-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path>
   <path d="M16 3v4"></path>
   <path d="M8 3v4"></path>
   <path d="M4 11h16"></path>
   <path d="M11 15h1"></path>
   <path d="M12 15v3"></path>
</svg>

    </i>
    <time datetime="2025-04-17T00:00:00&#43;00:00">
      2025-04-17
    </time>
  </div>

  <div class="flex flex-row text-base gap-x-1">
    <i class="h-6 w-6 flex-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hourglass-high" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M6.5 7h11"></path>
   <path d="M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z"></path>
   <path d="M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z"></path>
</svg>

    </i>
    <span>
      6 minutes to read
    </span>
  </div>
</div>

      <div class="flex flex-col gap-y-1 md:flex-row md:gap-y-0 md:gap-x-4 text-slate-500 dark:text-slate-300">
  <div class="flex flex-row text-base gap-x-1">
    <i class="h-6 w-6 flex-none">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
    class="icon icon-tabler icons-tabler-outline icon-tabler-user">
    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
    <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
    <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>

    </i>
    <span>Andrew Moa</span>
  </div>
</div>

      
        
        <section class="prose prose-slate dark:prose-invert w-full max-w-4xl lg:max-w-5xl mt-6">
          <h2>Table of Contents</h2>
          <aside><nav id="TableOfContents">
  <ul>
    <li><a href="#1-record-macros">1. Record macros</a></li>
    <li><a href="#2-write-macros">2. Write macros</a></li>
    <li><a href="#3-run-the-macro">3. Run the macro</a></li>
  </ul>
</nav></aside>
        </section>
        
      

      <article class="mt-6 w-full max-w-4xl lg:max-w-5xl prose prose-slate dark:prose-invert prose-quoteless post-content">
        <p>STAR-CCM+ macro is essentially a java file, and the syntax is no different from ordinary java. Using macros can help us simplify the processing process, especially some repetitive process operations. Completing some process operations by writing macro files can greatly liberate human resources, and even complete certain operations during the solution process.</p>
<h2 id="1-record-macros">1. Record macros</h2>
<p>The essence of STAR-CCM+ macro is a collection of various operation commands in the analysis process. Instead of explaining the complex and cumbersome java syntax + API from scratch, it is better to start with engineering issues directly.</p>
<p>The entrance to the STAR-CCM+ macro operation is in the toolbar in the upper left corner. From left to right, the &ldquo;Play Macro&rdquo;, &ldquo;Start Recording&rdquo;, &ldquo;Pause Recording&rdquo; and &ldquo;Stop Recording&rdquo; buttons. The relevant operation options can also be found in the &ldquo;File&rdquo; menu.<div class="not-prose">
<picture>
    <source type="image/webp" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/8eb213bb22b885f81c06dcdb3eedd943_hu_d8b32a9be73c54ad.webp 320w, /post/2025-04-17-starccm-record-and-write-marco/images/8eb213bb22b885f81c06dcdb3eedd943_hu_b785363c8fb37b4e.webp 640w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <source type="image/jpeg" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/8eb213bb22b885f81c06dcdb3eedd943_hu_e7f530ebf38f5c5b.jpg 320w, /post/2025-04-17-starccm-record-and-write-marco/images/8eb213bb22b885f81c06dcdb3eedd943_hu_b1505efef7c1bd0e.jpg 640w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <img class="h-auto max-w-full rounded-lg" src="/post/2025-04-17-starccm-record-and-write-marco/images/8eb213bb22b885f81c06dcdb3eedd943_hu_b1505efef7c1bd0e.jpg" width="771" height="86" alt="8eb213bb22b885f81c06dcdb3eedd943.png" title="8eb213bb22b885f81c06dcdb3eedd943.png" loading="lazy" />
  </picture>
</div>
</p>
<p>Clicking &ldquo;Start Recording&rdquo; will bring up a dialog box that prompts the location of the macro to be saved. If some scene-based graphics operations are used during the process, you can check &ldquo;Including Graphic Commands&rdquo;; but it is not recommended to check it in general, especially when it involves supercomputer submissions.<div class="not-prose">
<picture>
    <source type="image/webp" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/07127786a188bff13345a15a58d3e7e4_hu_1ae359c4407f915c.webp 320w, /post/2025-04-17-starccm-record-and-write-marco/images/07127786a188bff13345a15a58d3e7e4_hu_ab91c75e2b129e4d.webp 640w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <source type="image/jpeg" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/07127786a188bff13345a15a58d3e7e4_hu_d82fc1179f9cb8b0.jpg 320w, /post/2025-04-17-starccm-record-and-write-marco/images/07127786a188bff13345a15a58d3e7e4_hu_61dab57287a0c258.jpg 640w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <img class="h-auto max-w-full rounded-lg" src="/post/2025-04-17-starccm-record-and-write-marco/images/07127786a188bff13345a15a58d3e7e4_hu_61dab57287a0c258.jpg" width="641" height="395" alt="07127786a188bff13345a15a58d3e7e4.png" title="07127786a188bff13345a15a58d3e7e4.png" loading="lazy" />
  </picture>
</div>
</p>
<p>Next, you can see the code for recording the java process in the output window. At this time, the analysis operations can be performed normally. STAR-CCM+ will convert the related operations into the corresponding java code and display them in the output window.<div class="not-prose">
<picture>
    <source type="image/webp" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/51fce847b53231bf3cda774399192e37_hu_a4bcb12358d1352e.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <source type="image/jpeg" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/51fce847b53231bf3cda774399192e37_hu_d4aca9d582021ae0.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <img class="h-auto max-w-full rounded-lg" src="/post/2025-04-17-starccm-record-and-write-marco/images/51fce847b53231bf3cda774399192e37_hu_fa21624746cc271c.jpg" width="513" height="98" alt="51fce847b53231bf3cda774399192e37.png" title="51fce847b53231bf3cda774399192e37.png" loading="lazy" />
  </picture>
</div>
</p>
<p>When the analysis operation is completed, click &ldquo;Stop recording&rdquo; and you can see the complete java code in the output window, and the code is also saved to the java file.</p>
<p>Below is a recorded macro code example, which is used to clear the original mesh and re-divid the body mesh.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// Simcenter STAR-CCM+ macro: reGenerateMesh.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Written by Simcenter STAR-CCM+ 19.06.009</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// The two lines of comments above are generated during recording, recording the macro file name and STAR-CCM+ version information.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">macro</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.common.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.meshing.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// The class name and file name should be consistent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">reGenerateMesh</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StarMacro</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// This function is the entry point of the entire macro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">execute0</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// This function performs mesh clearing and meshing operations.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute0</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MeshPipelineController</span><span class="w"> </span><span class="n">meshPipelineController_0</span><span class="w"> </span><span class="o">=</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">MeshPipelineController</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Clear the original grid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">meshPipelineController_0</span><span class="p">.</span><span class="na">clearGeneratedMeshes</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Generate Volume Mesh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">meshPipelineController_0</span><span class="p">.</span><span class="na">generateVolumeMesh</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>For the specific code, you can check the help file of STAR-CCM+, but most API naming is more intuitive and can be inferred based on their naming.<div class="not-prose">
<picture>
    <source type="image/webp" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/3f50c712cf6d83b26df0cd1ea4f56c30_hu_61099bc8895f37a9.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <source type="image/jpeg" srcset="/post/2025-04-17-starccm-record-and-write-marco/images/3f50c712cf6d83b26df0cd1ea4f56c30_hu_ec06e6e7533bcbb.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
    <img class="h-auto max-w-full rounded-lg" src="/post/2025-04-17-starccm-record-and-write-marco/images/3f50c712cf6d83b26df0cd1ea4f56c30_hu_36ac19028f2b89e3.jpg" width="341" height="317" alt="3f50c712cf6d83b26df0cd1ea4f56c30.png" title="3f50c712cf6d83b26df0cd1ea4f56c30.png" loading="lazy" />
  </picture>
</div>
</p>
<p>If the operations to be performed are complicated, there are many processes. It is recommended to decompose the process, record different java files separately, and then combine them.<div class="not-prose">
<picture>
    <source type="image/webp" srcset="" sizes="(min-width: 1024px) 100vw, 50vw" />
    <source type="image/jpeg" srcset="" sizes="(min-width: 1024px) 100vw, 50vw" />
    <img class="h-auto max-w-full rounded-lg" src="/post/2025-04-17-starccm-record-and-write-marco/images/8b5c8a7f67ad37f236f50b41843e93f1_hu_de530fb9af39097.jpg" width="281" height="212" alt="8b5c8a7f67ad37f236f50b41843e93f1.png" title="8b5c8a7f67ad37f236f50b41843e93f1.png" loading="lazy" />
  </picture>
</div>
</p>
<p>If the recording operation requires running the solver, you can change to a simple model for recording, or you can lower the parameters a little to save time and resources.</p>
<h2 id="2-write-macros">2. Write macros</h2>
<p>With the Java file recorded above, the following writing is much easier.</p>
<p>Next, combine these modules and write a new Java macro file. The function is to automatically divide the grid after reading the sim file, set parameters and run the solution. After the solution is completed, the corresponding drawing and scene files are output, and the result file with the specified file name is saved.</p>
<p>It is recommended to use IDE tools here. With the help of syntax checking, code highlighting and automatic completion, it can reduce the chance of errors, which is very friendly to beginners. The official tutorial and help file of STAR-CCM+ demonstrates <strong>NetBeans</strong>. Some people also like to use <strong>Eclipse</strong> or <strong>IntelliJ IDEA</strong>. There is no big difference here, so choose according to your personal preferences.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// Simcenter STAR-CCM+ macro: meshAndRun.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Written by Simcenter STAR-CCM+ 19.06.009</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">macro</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.common.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.meshing.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.base.neo.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">star.vis.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">meshAndRun</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StarMacro</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Input parameters for analysis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">env_temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">25</span><span class="p">.</span><span class="na">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Unit: C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">fan_speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">2450</span><span class="p">.</span><span class="na">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Unit: rpm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Some parameters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">boolean</span><span class="w"> </span><span class="n">autoSave</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">maxStep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">autoSaveStep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1000</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">boolean</span><span class="w"> </span><span class="n">saveAsResultsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// It is best to write the full path here, otherwise it will be saved to the ${HOME} directory by default under Windows</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">resultsFileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;final_results.sim&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Macro operation entry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Perform analysis operations</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">autoSave</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">enableAutoSave</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">disableAutoSave</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">generateMesh</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">modifyParameters</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">modifyMaxStep</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">run</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">exportPlot</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">exportScene</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">saveAsResultsFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">saveAs</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Generate Volume Mesh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">generateMesh</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MeshPipelineController</span><span class="w"> </span><span class="n">meshPipelineController_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">MeshPipelineController</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// meshPipelineController_0.clearGeneratedMeshes();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">meshPipelineController_0</span><span class="p">.</span><span class="na">generateVolumeMesh</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Set up autosave</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">enableAutoSave</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">AutoSave</span><span class="w"> </span><span class="n">autoSave_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getSimulationIterator</span><span class="p">().</span><span class="na">getAutoSave</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">autoSave_0</span><span class="p">.</span><span class="na">setAutoSaveBatch</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">autoSave_0</span><span class="p">.</span><span class="na">setAutoSaveMesh</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">AutoSaveFileSet</span><span class="w"> </span><span class="n">autoSaveFileSet_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">AutoSaveFileSet</span><span class="p">)</span><span class="w"> </span><span class="n">autoSave_0</span><span class="p">.</span><span class="na">getAutoSaveFileSetManager</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">getObject</span><span class="p">(</span><span class="s">&#34;Auto Save File Set 1&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">StarUpdate</span><span class="w"> </span><span class="n">starUpdate_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoSaveFileSet_0</span><span class="p">.</span><span class="na">getStarUpdate</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">IterationUpdateFrequency</span><span class="w"> </span><span class="n">iterationUpdateFrequency_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">starUpdate_0</span><span class="p">.</span><span class="na">getIterationUpdateFrequency</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">IntegerValue</span><span class="w"> </span><span class="n">integerValue_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iterationUpdateFrequency_0</span><span class="p">.</span><span class="na">getIterationFrequencyQuantity</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">integerValue_0</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">setValue</span><span class="p">(</span><span class="n">autoSaveStep</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">starUpdate_0</span><span class="p">.</span><span class="na">setEnabled</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Cancel autosave</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">disableAutoSave</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">AutoSave</span><span class="w"> </span><span class="n">autoSave_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getSimulationIterator</span><span class="p">().</span><span class="na">getAutoSave</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">autoSave_0</span><span class="p">.</span><span class="na">setAutoSaveMesh</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">autoSave_0</span><span class="p">.</span><span class="na">setAutoSaveBatch</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Setting the input parameters for the analysis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">modifyParameters</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ScalarGlobalParameter</span><span class="w"> </span><span class="n">scalarGlobalParameter_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">ScalarGlobalParameter</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">GlobalParameterManager</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">getObject</span><span class="p">(</span><span class="s">&#34;env_temp&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Units</span><span class="w"> </span><span class="n">units_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">Units</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getUnitsManager</span><span class="p">().</span><span class="na">getObject</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">scalarGlobalParameter_0</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">setValueAndUnits</span><span class="p">(</span><span class="n">env_temp</span><span class="p">,</span><span class="w"> </span><span class="n">units_0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ScalarGlobalParameter</span><span class="w"> </span><span class="n">scalarGlobalParameter_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">ScalarGlobalParameter</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">GlobalParameterManager</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">getObject</span><span class="p">(</span><span class="s">&#34;fan_speed&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Units</span><span class="w"> </span><span class="n">units_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">Units</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getUnitsManager</span><span class="p">().</span><span class="na">getObject</span><span class="p">(</span><span class="s">&#34;rpm&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">scalarGlobalParameter_1</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">setValueAndUnits</span><span class="p">(</span><span class="n">fan_speed</span><span class="p">,</span><span class="w"> </span><span class="n">units_1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Set the maximum number of steps</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">modifyMaxStep</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">StepStoppingCriterion</span><span class="w"> </span><span class="n">stepStoppingCriterion_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">StepStoppingCriterion</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="na">getSolverStoppingCriterionManager</span><span class="p">().</span><span class="na">getSolverStoppingCriterion</span><span class="p">(</span><span class="s">&#34;Maximum Steps&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">IntegerValue</span><span class="w"> </span><span class="n">integerValue_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stepStoppingCriterion_0</span><span class="p">.</span><span class="na">getMaximumNumberStepsObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">integerValue_0</span><span class="p">.</span><span class="na">getQuantity</span><span class="p">().</span><span class="na">setValue</span><span class="p">(</span><span class="n">maxStep</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Run the solver</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ResidualPlot residualPlot_0 = ((ResidualPlot)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// simulation_0.getPlotManager().getPlot(&#34;Residuals&#34;));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// residualPlot_0.openInteractive();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getSimulationIterator</span><span class="p">().</span><span class="na">run</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Output plot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">exportPlot</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MonitorPlot</span><span class="w"> </span><span class="n">monitorPlot_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">MonitorPlot</span><span class="p">)</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getPlotManager</span><span class="p">().</span><span class="na">getPlot</span><span class="p">(</span><span class="s">&#34;mass_flow&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// You can use relative paths or absolute paths here.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">monitorPlot_0</span><span class="p">.</span><span class="na">export</span><span class="p">(</span><span class="n">resolvePath</span><span class="p">(</span><span class="s">&#34;mass_flow.csv&#34;</span><span class="p">),</span><span class="w"> </span><span class="s">&#34;,&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Output scene</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">exportScene</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Scene</span><span class="w"> </span><span class="n">scene_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">getSceneManager</span><span class="p">().</span><span class="na">getScene</span><span class="p">(</span><span class="s">&#34;Geometry&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">scene_0</span><span class="p">.</span><span class="na">export3DSceneFileAndWait</span><span class="p">(</span><span class="n">resolvePath</span><span class="p">(</span><span class="s">&#34;Geometry.sce&#34;</span><span class="p">),</span><span class="w"> </span><span class="s">&#34;Geometry&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">SceneFileCompressionLevel</span><span class="p">.</span><span class="na">OFF</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Save the results</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">saveAs</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Simulation</span><span class="w"> </span><span class="n">simulation_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getActiveSimulation</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">simulation_0</span><span class="p">.</span><span class="na">saveState</span><span class="p">(</span><span class="n">resultsFileName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="3-run-the-macro">3. Run the macro</h2>
<p>After writing, you can try running the following to see if there are any errors reported.
If you try to run the solution, you can reduce the number of solutions to see if the output file is correct.
Change the conditions and parameters, test them several times, and after complete tests, there will be no errors reported before it can be used in the production environment.</p>
<p>If you want to submit an overcomputer operation, you should<code>-batch</code>Append the java macro file path <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> to the switch.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Bash" data-lang="Bash"><span class="line"><span class="cl">starccm+ <span class="o">[</span>path-to-sim-file<span class="o">]</span> -batch <span class="o">[</span>path-to-java-file<span class="o">]</span> -np <span class="o">[</span>number-of-threads<span class="o">]</span> ...
</span></span></code></pre></div><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://www.topcfd.cn/Ebook/STARCCMP/GUID-8A0803A8-C91B-4996-9C4B-FF6658C63985.html" target="_blank" rel="noopener">编制应用程序脚本</a>
&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

      </article>

      


  
<script type="text/javascript">
  (function() {
    const themeToggle = document.querySelector('.darkmode-toggle input');
    const light = 'light';
    const dark = 'dark';
    let isDark = localStorage.theme === dark || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
    let theme = isDark ? dark : light;

    const s = document.createElement('script');
    s.type = 'text/javascript';
    const dataset = {
        repo: 'AndrewMoa2005\/AndrewMoa2005.github.io',
        repoId: 'R_kgDOOSI4_A',
        category: 'General',
        categoryId: 'DIC_kwDOOSI4_M4Co1Kf',
        mapping: 'pathname',
        reactionsEnabled: '1',
        emitMetadata: '0',
        theme: theme,
        lang: 'en',
    };
    s.src = 'https://giscus.app/client.js';
    s.crossorigin = 'anonymous';
    s.async = true;
    Object.entries(dataset).forEach(function(a) {
        return s.dataset[a[0]] = a[1];
    });

    const curScriptElement = document.currentScript;
    curScriptElement.parentNode.insertBefore(s, curScriptElement);

    function sendMessage(message) {
      const iframe = document.querySelector('iframe.giscus-frame');
      
      if (!iframe) return;
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
    }

    themeToggle.addEventListener('change', function () {
      if (this.checked) {
        theme = dark;
      } else {
        theme = light;
      }
      sendMessage({
        setConfig: {
          theme: theme,
        }
      });
    });
  })();
</script>
  



    </div>
  </div>
</div>

  </main>
  <footer class="flex flex-none justify-center">
    <section class="flex flex-col md:flex-row mx-2 md:mx-0 gap-2 md:gap-0 justify-between w-full max-w-4xl lg:max-w-5xl py-6 text-slate-500 dark:text-slate-300">
  <div class="flex flex-row">
    
  
  
  
  
  
  
  
  
  
  
    <a href="https://github.com/AndrewMoa2005" target="_blank" title="Github" class="flex flex-row mr-2">
      <span class="hidden">Github</span>
      <i class="h-6 w-6 flex-none"> <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
</svg>
 </i>
    </a>
  
  
  
  


  </div>
  <div class="grow"></div>
  <div class="flex flex-row">
    <i class="h-6 w-6 flex-none"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
   <path d="M14 9.75a3.016 3.016 0 0 0 -4.163 .173a2.993 2.993 0 0 0 0 4.154a3.016 3.016 0 0 0 4.163 .173"></path>
</svg>
</i> 2025 Andrew Moa
    
  </div>
  
  <div class="flex flex-row">
    <span class="ml-0 pl-0 md:ml-2 md:pl-2 border-l-0 md:border-l border-slate-300 dark:border-slate-400">
      Powered by <a href="https://gohugo.io" target="_blank" rel="noopener" class="underline">Hugo</a> <span class="text-red-600">&hearts;</span> <a href="https://github.com/tomowang/hugo-theme-tailwind" target="_blank" rel="noopener" class="underline">Tailwind</a>
    </span>
  </div>
  
</section>

  </footer>
  <script src="/main.min.65ca5b0808abf278fcec5d424701ebf0b4bc46a737129cd5e57fdb739f463e79.js"></script>

<div class="hidden top-1 right-1" id="code-copy">
  <i class="h-6 w-6 block">
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" />
  <path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" />
</svg>

  </i>
</div>
<div class="hidden top-1 right-1" id="code-copy-done">
  <i class="h-6 w-6 block">
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-check" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M5 12l5 5l10 -10" />
</svg>

  </i>
</div><script src="/code-copy.min.e7b2a74adef1ed474c335c8bd5e7832b2316b8842b0f9184d65286c5bd64f51a.js"></script>





</body>
</html>
